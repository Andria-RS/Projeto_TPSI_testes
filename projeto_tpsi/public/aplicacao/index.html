<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="\aplicacao\sytles\styles.css">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <title>Página Inicial</title>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Verifica o tipo de utilizador e exibe o link para o admin se for necessário
      fetch("/api/tipo-utilizador")
        .then(response => response.json())
        .then(data => {
          if (data.tipoUtilizador === 1) {
            const adminLink = document.getElementById("adminLink");
            adminLink.style.display = "block";
          }
        });
    });

    function logout() {
      fetch("/api/logout", {
        method: "POST"
      })
        .then(response => response.json())
        .then(data => {
          if (data.message) {
            alert(data.message);
            window.location.href = "/aplicacao/login.html"; // Redireciona para a página de login
          }
        })
        .catch(error => {
          alert("Erro ao fazer logout: " + error.message);
        });
    }

    function togglePassword(inputId, iconId) {
      const passwordField = document.getElementById(inputId);
      const toggleIcon = document.getElementById(iconId);

      if (passwordField.type === "password") {
        passwordField.type = "text";
        toggleIcon.classList.remove('ri-eye-line');
        toggleIcon.classList.add('ri-eye-off-line');
      } else {
        passwordField.type = "password";
        toggleIcon.classList.remove('ri-eye-off-line');
        toggleIcon.classList.add('ri-eye-line');
      }
    }
  </script>
</head>

<body>

  <div id="navbar"></div>

  <div class="container-fluid mt-5">
    <div class="row">

      <!--  CONTEUDO SIDEBAR -->
      <nav class="col-sm-4 mt-5 sidebar p-3">
        <div class="list-group">

          <!-- Card para Documentos -->
          <div class="card mb-3">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search"
                viewBox="0 0 16 16">
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
              </svg>
              - Visualizar\Pesquisar
            </div>
            <div class="card-body">
              <a href="../aplicacao/search.html" class="btn" style="background-color: transparent; border: none;">
                Clique para Visualizar\Pesquisar.</a>
            </div>
          </div>

          <!-- Card para Add Student -->
          <div class="card mb-3" onclick="openModal('modal_add_Sutdent')">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-person-plus" viewBox="0 0 16 16">
                <path
                  d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                <path fill-rule="evenodd"
                  d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5" />
              </svg>
              - Adicionar Aluno
            </div>
            <div class="card-body">
              <button class="btn" onclick="openModal('modal_add_Sutdent')"
                style="background-color: transparent; border: none;"> Clique para Adicionar um Aluno.</button>
            </div>
          </div>

          <!-- Card para Add Course -->
          <div class="card mb-3" onclick="openModal('modal_add_course')">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-plus-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                <path
                  d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
              </svg>
              - Adicionar curso
            </div>
            <div class="card-body">
              <button class="btn" onclick="openModal('modal_add_course')"
                style="background-color: transparent; border: none;"> Clique para Adicionar um Curso.</button>
            </div>
          </div>

          <!-- Card para Add Cordenador -->
          <div class="card mb-3" onclick="openModal('modal_add_Cordenador')">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-person-plus" viewBox="0 0 16 16">
                <path
                  d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                <path fill-rule="evenodd"
                  d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5" />
              </svg>
              - Adicionar Coordenador
            </div>
            <div class="card-body">
              <button class="btn" onclick="openModal('modal_add_Cordenador')"
                style="background-color: transparent; border: none;"> Clique para Adicionar um Coordenador.</button>
            </div>
          </div>

          <!-- Card para Add Orientador -->
          <div class="card mb-3" onclick="openModal('modal_add_Oriendador')">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-person-plus" viewBox="0 0 16 16">
                <path
                  d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                <path fill-rule="evenodd"
                  d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5" />
              </svg>
              - Adicionar Orientador
            </div>
            <div class="card-body">
              <button class="btn" onclick="openModal('modal_add_Oriendador')"
                style="background-color: transparent; border: none;"> Clique para Adicionar um Orientador.</button>
            </div>
          </div>

          <!-- Card para Add Tese -->
          <div class="card mb-3" onclick="openModal('modal_add_tese')">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
                <path
                  d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5" />
                <path
                  d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z" />
              </svg>
              - Adicionar Tese
            </div>
            <div class="card-body">
              <button class="btn" onclick="openModal('modal_add_tese')"
                style="background-color: transparent; border: none;"> Clique para Adicionar Tese.</button>
            </div>
          </div>
        </div>
      </nav>


      <!-- Modal  criar aluno-->
      <div id="modal_add_Sutdent" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Adicionar Novo Estudante</h5>
              <button type="button" class="btn-close" data-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <form id="form_Aluno" onsubmit="add_user(event)">
              <div class="modal-body">
                <h6 class="mb-3">Informações Pessoais</h6>
                <div class="row g-3 align-items-center">
                  <div class="col-md-12">
                    <label for="foto_Aluno" class="form-label">Foto de Perfil:</label>
                    <input type="file" class="form-control" id="foto_Aluno" name="foto" accept="image/*">
                  </div>
                  <div class="col-md-12">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label for="nome_Aluno" class="form-label">Nome:</label>
                        <input type="text" class="form-control" id="nome_Aluno" name="nome"
                          placeholder="Introduza o nome completo" required>
                      </div>
                      <div class="col-md-6">
                        <label for="contacto_Aluno" class="form-label">Contacto:</label>
                        <input type="text" class="form-control" id="contacto_Aluno" name="contacto"
                          placeholder="Introduza o contacto" required>
                      </div>
                      <div class="col-md-6">
                        <label for="email_Aluno" class="form-label">E-mail:</label>
                        <input type="email" class="form-control" id="email_Aluno" name="email"
                          placeholder="Introduza o e-mail" required>
                      </div>
                      <div class="col-md-6">
                        <label for="password_Aluno" class="form-label">Palavra-passe:</label>
                        <div class="input-group">
                          <input type="password" class="form-control" id="password_Aluno" name="password"
                            placeholder="Introduza a palavra-passe" required>
                          <button class="btn btn-outline-secondary" type="button"
                            onclick="togglePassword('password_Aluno', 'eye_icon')">
                            <i id="eye_icon" class="ri-eye-line"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <h6 class="mt-4 mb-3">Informações Curriculares</h6>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="id_curso_Aluno">Curso de Mestrado:</label>
                    <select class="class_curso form-select" id="id_curso_Aluno" name="id_curso" required>
                      <option value="">Selecione o Curso</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="id_polo_Aluno">Polo:</label>
                    <select class="class_polo form-select" id="id_polo_Aluno" name="id_polo" required>
                      <option value="">Selecione o Polo</option>
                    </select>
                  </div>
                  <div class="modal-footer">
                    <button type="submit" class="btn btn-dark">Adicionar</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>


      <!-- Modal  criar Cordenador-->
      <div id="modal_add_Cordenador" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Adicionar Novo Coordenador</h5>
              <button type="button" class="btn-close" data-dismiss="modal" aria-label="Fechar"></button>
            </div>

            <form id="form_Coordenador" onsubmit="add_user(event)">
              <div class="modal-body">

                <h6 class="mb-3">Informações pessoais</h6>
                <div class="row g-3 align-items-center">
                  <div class="form-group">
                    <label for="foto_Coordenador">Foto de Perfil:</label>
                    <input type="file" class="form-control" id="foto_Coordenador" name="foto" accept="image/*">
                  </div>

                  <div class="col-md-12">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label for="nome_Coordenador" class="form-label">Nome:</label>
                        <input type="text" class="form-control" id="nome_Coordenador" name="nome"
                          placeholder="Introduza o nome completo" required>
                      </div>

                      <div class="col-md-6">
                        <label for="contacto_Coordenador" class="form-label">Contacto:</label>
                        <input type="text" class="form-control" id="contacto_Coordenador" name="contacto"
                          placeholder="Introduza o contacto" required>
                      </div>

                      <div class="col-md-6">
                        <label for="email_Coordenador" class="form-label">E-mail:</label>
                        <input type="email" class="form-control" id="email_Coordenador" name="email"
                          placeholder="Introduza o e-mail" required>
                      </div>

                      <div class="col-md-6">
                        <label for="password_Coordenador" class="form-label">Palavra-passe:</label>
                        <div class="input-group">
                          <input type="password" class="form-control" id="password_Coordenador" name="password"
                            placeholder="Introduza a palavra-passe" required>
                          <button class="btn btn-outline-secondary" type="button"
                            onclick="togglePassword('password_Coordenador', 'eye_icon')">
                            <i id="eye_icon" class="ri-eye-line"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <h6 class="mt-4 mb-3">Informações Curriculares</h6>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="esp_Coordenador">Especialidade:</label>
                    <input type="text" class="form-control" id="esp_Coordenador" name="especialidade"
                      placeholder="Introduza a Especialidade" required>
                  </div>

                  <div class="col-md-6">
                    <label for="id_polo_Coordenador">Polo:</label>
                    <select class="class_polo form-select" id="id_polo_Coordenador" name="id_polo" required>
                      <option value="">Selecione o Polo</option>
                    </select>
                  </div>

                  <div class="mb-3">
                    <label for="Curiculo_Coordenador" class="form-label">Currículo (PDF):</label>
                    <input type="file" class="form-control" id="curriculo_Coordenador" name="curriculo" accept=".pdf"
                      required>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary">Adicionar</button>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>


    <!-- Modal  criar Curso-->
    <div id="modal_add_course" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Adicionar Curso</h5>
            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Fechar"></button>
          </div>

          <form id="form_Curso" onsubmit="add_course(event)">
            <div class="modal-body">
              <div class="col-md-12">
                <div class="row g-3">
                  <div class="col-md-12">
                    <label for="nome_mestrado" class="form-label">Nome do Curso de Mestrado:</label>
                    <input type="text" class="form-control" id="nome_mestrado" name="nome_mestrado"
                      placeholder="Introduza o nome do curso de mestrado" required>
                  </div>

                  <div class="col-md-12">
                    <label for="id_Orientador:">Coordenador:</label>
                    <select class="class_coordenador form-select" id="id_Coordenador" name="id_Coordenador" required>
                      <option value="">Selecione o Orientador</option>
                    </select>
                  </div>

                  <div class="col-md-12">
                    <label for="class_polo">Polo:</label>
                    <select class="class_polo form-select" id="id_polo_Curso" name="id_polo" required>
                      <option value="">Selecione o Polo</option>
                    </select>
                  </div>

                  <div class="modal-footer">
                    <button type="submit" class="btn btn-dark">Adicionar</button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal  criar Orientador-->
    <div id="modal_add_Oriendador" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Adicionar Novo Orientador</h5>
            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Fechar"></button>
          </div>

          <form id="form_Oriendador" onsubmit="add_user(event)">
            <div class="modal-body">

              <div class="row g-3 align-items-center">
                <div class="form-group">
                  <label for="foto_Oriendador">Foto de Perfil:</label>
                  <input type="file" class="form-control" id="foto_Oriendador" name="foto" accept="image/*">
                </div>

                <div class="col-md-6">
                  <label for="nome_Oriendador">Nome:</label>
                  <input type="text" class="form-control" id="nome_Oriendador" name="nome"
                    placeholder="Introduza o nome completo" required>
                </div>

                <div class="col-md-6">
                  <label for="contacto_Oriendador">Contacto:</label>
                  <input type="text" class="form-control" id="contacto_Oriendador" name="contacto"
                    placeholder="Introduza o contacto" required>
                </div>

                <div class="col-md-6">
                  <label for="email_Oriendador">E-mail:</label>
                  <input type="email" class="form-control" id="email_Oriendador" name="email"
                    placeholder="Introduza o e-mail" required>
                </div>

                <div class="col-md-6">
                  <label for="password_Oriendador">Palavra-passe:</label>
                  <div class="input-group">
                    <input type="password" class="form-control" id="password_Oriendador" name="password"
                      placeholder="Introduza a palavra-passe" required>
                    <button class="btn btn-outline-secondary" type="button"
                      onclick="togglePassword('password_Oriendador', 'eye_icon')">
                      <i id="eye_icon" class="ri-eye-line"></i>
                    </button>
                  </div>
                </div>
              </div>

              <h6 class="mt-4 mb-3">Informações Curriculares</h6>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="esp_Oriendador">Especialidade:</label>
                  <input type="text" class="form-control" id="esp_Oriendador" name="especialidade"
                    placeholder="Introduza a Especialidade" required>
                </div>

                <div class="col-md-6">
                  <label for="id_polo_Oriendador">Polo:</label>
                  <select class="class_polo form-select" id="id_polo_Oriendador" name="id_polo" required>
                    <option value="">Selecione o Polo</option>
                  </select>
                </div>

                <div class="form-group mb-3">
                  <label for="Curiculo_Oriendador" class="form-label">Currículo (PDF):</label>
                  <input type="file" class="form-control" id="curriculo_Oriendador" name="curriculo" accept=".pdf"
                    required>
                </div>
              </div>

              <div class="modal-footer">
                <button type="submit" class="btn btn-dark">Adicionar</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Criar Tese -->
    <div id="modal_add_tese" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Adicionar Tese</h5>
            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
          </div>

          <form id="form_Tese" onsubmit="add_tese(event)">
            <div class="modal-body">

              <h6 class="mt-4 mb-3">Entidades da Tese</h6>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="id_aluno">Aluno:</label>
                  <select class="class_alunos form-select" id="id_aluno" name="id_aluno" required>
                    <option value="">Selecione o aluno</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="id_orientador">Orientador:</label>
                  <select class="class_orientador form-select" id="id_orientador" name="id_orientador" required>
                    <option value="">Selecione o orientador</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="id_coordenador_tese">Coordenador:</label>
                  <select class="class_coordenador form-select" id="id_coordenador_tese" name="id_coordenador_tese"
                    required>
                    <option value="">Selecione o coordenador</option>
                  </select>
                </div>
              </div>

              <h6 class="mt-4 mb-3">Informações da Tese</h6>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="tema">Tema:</label>
                  <input type="text" class="form-control" id="tema" name="tema" placeholder="Introduza o tema da tese"
                    required>
                </div>
                <div class="col-md-6">
                  <label for="descricao">Descrição:</label>
                  <textarea class="form-control" id="descricao" name="descricao"
                    placeholder="Introduza a descrição da tese"></textarea>
                </div>
                <div class="col-md-6">
                  <label for="status">Status:</label>
                  <select class="form-select" id="status" name="status" required>
                    <option value="">Selecione o status</option>
                    <option value="Em Andamento">Em Andamento</option>
                    <option value="Concluída">Concluída</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="data_submissao">Data de Submissão:</label>
                  <input type="date" class="form-control" id="data_submissao" name="data_submissao">
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button type="submit" class="btn btn-dark">Adicionar</button>
            </div>
          </form>
        </div>
      </div>
    </div>


    <!--  CONTEUDO CENTRAL -->
    <div class="col-sm-8 content py-5 p-5 mt-5">
      <h2 class="text-center">Bem-vindo!</h2>
      <p class="text-center">Você iniciou sessão no Sistema.</p>

      <div class="card shadow-sm p-3 rounded-3" style="max-width: 500px;">
        <div class="d-flex justify-content-between align-items-center">
          <h6 class="text-danger"><i class="fas fa-hourglass-half"></i> Aprovação pendente</h6>
          <a href="#" class="text-primary">Ver mais></a>
        </div>
        <hr>
        <div class="d-flex align-items-center">
          <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Foto de Paula" class="rounded-circle me-3"
            width="45" height="45">
          <span class="fw-bold">Paula Martinez</span>
          <span class="ms-auto badge text-bg-light px-3 py-2">Pending</span>
        </div>
      </div>

      <!-- Link para o painel admin visível para admins -->
      <div class="text-center mt-4" style="display: none;" id="adminLink">
        <a href="../admin/admin.html" class="btn btn-warning">Ir para o Admin</a>
      </div>
    </div>
  </div>
  </div>

  

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="../auxiliador\auxiliador.js"></script>
  <script src="../auxiliador\auxiliador_email.js"></script>
  <script src="../auxiliador\loadNavbar.js"></script>

</body>
<footer class="bg-light text-center py-3 fixed-bottom">
  <div class="container">
    <p class="mb-1">&copy; Instituto Politécnico de Viana do Castelo • Gestor de Teses • 2024</p>
  </div>
</footer>

</html>